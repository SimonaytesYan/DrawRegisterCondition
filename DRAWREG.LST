Turbo Assembler	 Version 4.1	    02/27/23 19:20:48	    Page 1
drawreg.asm



      1	0000			     .model tiny
      2				     .186
      3	0000			     .code
      4				     org 100h
      5				     locals __
      6
      7	0100  EB 25 90		     Start:  jmp Main
      8
      9	0103			     Int09   proc
     10	0103  06			     push es
     11	0104  53			     push bx
     12	0105  50			     push ax
     13
     14	0106  BB B800			     mov bx, 0b800h
     15	0109  8E C3			     mov es, bx
     16	010B  BB 0370			     mov bx, 160d*5+80d
     17
     18	010E  B4 7E			     mov ah, 07eh
     19	0110  E4 60			     in	al, 60h					     ;get scan-code
     20	0112  26: 89 07			     mov word ptr es:[bx], ax
     21
     22	0115  E4 61			     in	al, 61h				     ;
     23	0117  0C 80			     or	al, 80h				     ;
     24	0119  E6 61			     out 61h, al			     ;
     25	011B  24 7F			     and al, not 80h		     ;
     26	011D  E6 61			     out 61h, al			     ;Say to keyboard controler	OK
     27
     28	011F  B0 20			     mov al, 20h			     ;
     29	0121  E6 20			     out 20h, al			     ;Say to int controler OK
     30
     31	0123  58			     pop ax
     32	0124  5B			     pop bx
     33	0125  07			     pop es
     34	0126  CF			     iret
     35	0127				     endp
     36	0127			     EOP:
     37
     38	0127			     Main:
     39	0127  BB 0000			     mov bx, 0h					     ;
     40	012A  8E C3			     mov es, bx					     ;
     41	012C  BB 0024			     mov bx, 4*9				     ;
     42	012F  26: C7 07	0103r		     mov es:[bx], offset Int09	     ;
     43	0134  8C C8			     mov ax, cs					     ;
     44	0136  26: 89 47	02		     mov es:[bx+2], ax			     ;Put in int table new 9th int
     45
     46	013A  B8 3100			     mov ax, 3100h
     47	013D  BA 0127r			     mov dx, offset EOP
     48	0140  C1 EA 04			     shr dx, 4			     ;Convert to paragraphs
     49	0143  42			     inc dx			     ;Round up
     50	0144  CD 21			     int 21h			     ;End program with saving code of new int in memory
     51
     52				     end Start
Turbo Assembler	 Version 4.1	    02/27/23 19:20:48	    Page 2
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/27/23"
??FILENAME			  Text	 "drawreg "
??TIME				  Text	 "19:20:48"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0103H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 DRAWREG
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
EOP				  Near	 DGROUP:0127
INT09				  Near	 DGROUP:0103
MAIN				  Near	 DGROUP:0127
START				  Near	 DGROUP:0100

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  0146 Word	  Public  CODE
